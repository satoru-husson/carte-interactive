<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Carte Interactive</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
    <style>
        body { display: flex; }
        #sidebar { width: 18%; padding: 20px; }
        #map { height: 800px; width: 82%; margin-bottom: 20px; }
        .cap-btn {
            display: block;
            margin-bottom: 8px;
            padding: 8px;
            font-weight: bold;
            background: #f0f0f0;
            border: 1px solid #3388ff;
            cursor: pointer;
        }
        .cap-btn.active {
            background: #3388ff;
            color: #fff;
        }
        .sub-cap-btn {
            display: block;
            margin: 5px 0 5px 10px;
            padding: 6px;
            background: #e0e0e0;
            border: 1px solid #aaa;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div id="sidebar">
        <h2>Capabilities</h2>
        <div id="capabilities-container"></div>
    </div>
    <div id="map"></div>

    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script>
    // Initialisation de la carte centrée sur le monde
    const map = L.map('map').setView([20, 0], 2);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '© OpenStreetMap contributors'
    }).addTo(map);
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Capabilities</title>
  <style>
    .capability-btn {
      margin: 5px;
      padding: 10px 20px;
      background-color: #0077cc;
      color: white;
      border: none;
      cursor: pointer;
    }

    .sub-capabilities {
      margin-top: 10px;
      display: none;
    }

    .sub-capability {
      margin: 3px;
      padding: 8px;
      background-color: #e0e0e0;
      display: inline-block;
    }
  </style>
</head>
<body>

  <h2>Capabilities</h2>
  <div id="capabilities">
    <button class="capability-btn" onclick="showSubCapabilities(1)">Capability 1</button>
    <button class="capability-btn" onclick="showSubCapabilities(2)">Capability 2</button>
    <button class="capability-btn" onclick="showSubCapabilities(3)">Capability 3</button>
    <button class="capability-btn" onclick="showSubCapabilities(4)">Capability 4</button>
    <button class="capability-btn" onclick="showSubCapabilities(5)">Capability 5</button>
    <button class="capability-btn" onclick="showSubCapabilities(6)">Capability 6</button>
  </div>

  <div id="sub-capabilities" class="sub-capabilities"></div>

  <script>
    const subCapabilitiesData = {
      1: ["Sub 1.1", "Sub 1.2", "Sub 1.3", "Sub 1.4", "Sub 1.5"],
      2: ["Sub 2.1", "Sub 2.2", "Sub 2.3", "Sub 2.4", "Sub 2.5"],
      3: ["Sub 3.1", "Sub 3.2", "Sub 3.3", "Sub 3.4", "Sub 3.5"],
      4: ["Sub 4.1", "Sub 4.2", "Sub 4.3", "Sub 4.4", "Sub 4.5"],
      5: ["Sub 5.1", "Sub 5.2", "Sub 5.3", "Sub 5.4", "Sub 5.5"],
      6: ["Sub 6.1", "Sub 6.2", "Sub 6.3", "Sub 6.4", "Sub 6.5"]
    };

    function showSubCapabilities(capabilityId) {
      const container = document.getElementById("sub-capabilities");
      container.innerHTML = "";
      subCapabilitiesData[capabilityId].forEach(sub => {
        const div = document.createElement("div");
        div.className = "sub-capability";
        div.textContent = sub;
        container.appendChild(div);
      });
      container.style.display = "block";
    }
  </script>

</body>
</html>

    // Chargement du GeoJSON des pays
    fetch('countries.geojson')
        .then(response => response.json())
        .then(data => {
            L.geoJSON(data, {
                style: {
                    color: "#3388ff",
                    weight: 1,
                    fillOpacity: 0.2
                },
                onEachFeature: function (feature, layer) {
                    layer.bindPopup(feature.properties.ADMIN || "Pays");
                }
            }).addTo(map);
        })
        .catch(err => { alert("Impossible de charger countries.geojson"); });

    let capabilitiesData = [];
    let selectedCapability = null;

    function renderCapabilities() {
        const container = document.getElementById('capabilities-container');
        container.innerHTML = '';
        capabilitiesData.forEach((cap, i) => {
            const capBtn = document.createElement('button');
            capBtn.textContent = cap.name;
            capBtn.className = 'cap-btn' + (selectedCapability === i ? ' active' : '');
            capBtn.onclick = () => {
                selectedCapability = (selectedCapability === i) ? null : i;
                renderCapabilities();
            };
            container.appendChild(capBtn);

            // Affiche les subcapabilities si la capability est sélectionnée
            if (selectedCapability === i) {
                cap.subCapabilities.forEach((sub, j) => {
                    const subBtn = document.createElement('button');
                    subBtn.textContent = sub.name;
                    subBtn.className = 'sub-cap-btn';
                    subBtn.onclick = () => {
                        // Ajoute ici la logique pour gérer le clic sur une subcapability
                        alert(`Subcapability sélectionnée : ${sub.name}`);
                    };
                    container.appendChild(subBtn);
                });
            }
        });
    }

    window.addEventListener('DOMContentLoaded', () => {
        fetch('data.json')
            .then(r => r.json())
            .then(data => {
                capabilitiesData = data.capabilities;
                renderCapabilities();
            });
    });
    </script>
</body>
</html>




