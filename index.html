<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Capabilities</title>
    <style>
        body { display: flex; }
        #sidebar { width: 18%; padding: 20px; }
        #map { height: 800px; width: 82%; margin-bottom: 20px; }
        .cap-btn {
            display: block;
            width: 100%;
            margin-bottom: 8px;
            padding: 8px;
            font-weight: bold;
            background: #f0f0f0;
            border: 1px solid #3388ff;
            cursor: pointer;
        }
        .cap-btn.active {
            background: #3388ff;
            color: #fff;
        }
        .sub-cap-btn {
            display: block;
            width: 95%;
            margin: 5px 0 5px 10px;
            padding: 6px;
            background: #e0e0e0;
            border: 1px solid #aaa;
            cursor: pointer;
        }
        .btn { margin: 5px; padding: 10px 20px; cursor: pointer; }
        #l2-buttons { margin-top: 20px; }
    </style>
</head>
<body>
    <div id="sidebar">
        <h2>Capabilities</h2>
        <div id="capabilities-container"></div>
    </div>
    <div id="map"></div>
    <div id="l2-buttons"></div>

    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script>
    // Initialisation de la carte centrée sur le monde
    const map = L.map('map').setView([20, 0], 2);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '© OpenStreetMap contributors'
    }).addTo(map);

    // Chargement du GeoJSON des pays
    fetch('countries.geojson')
        .then(response => response.json())
        .then(data => {
            L.geoJSON(data, {
                style: {
                    color: "#3388ff",
                    weight: 1,
                    fillOpacity: 0.2
                },
                onEachFeature: function (feature, layer) {
                    layer.bindPopup(feature.properties.ADMIN || "Pays");
                }
            }).addTo(map);
        })
        .catch(err => { alert("Impossible de charger countries.geojson"); });

    let capabilitiesData = [];
    let selectedCapability = null;

    function renderCapabilities() {
    const container = document.getElementById('capabilities-container');
    container.innerHTML = '';

    capabilitiesData.forEach((cap, i) => {
        const capBtn = document.createElement('button');
        capBtn.textContent = cap.name;
        capBtn.className = 'cap-btn' + (selectedCapability === i ? ' active' : '');
        capBtn.onclick = () => {
            selectedCapability = (selectedCapability === i) ? null : i;
            alert(`Capability sélectionnée : ${cap.name}`);
            renderCapabilities();
        };
        container.appendChild(capBtn);
    });
}


    window.addEventListener('DOMContentLoaded', () => {
        fetch('data.json')
            .then(r => r.json())
            .then(data => {
                capabilitiesData = data.capabilities;
                renderCapabilities();
            });
    });
    </script>
</body>
</html>




